<div class="container">
  <div class="my-5 main">
    <div class="items">
      <h4>Vaša korpa</h4>
      <p>Trenutno imate {{ narudzbe.length }} lijekova za poručiti</p>
      <hr>
      <app-item-list *ngFor="let i of narudzbe"
        [name]="i.nazivLijeka"
        [description]="i.nazivUstanove"
        [price]="i.cijenaLijeka + 'KM'"
        btnText="Ukloni iz korpe"
        (btnClick)="removeOrder(i.narudzbaId)"
      >
      </app-item-list>
    </div>
    <div class="card-details card bg-primary mt-4 shadow-lg">
      <form #loginForm="ngForm" (submit)="confirmOrder(loginForm.value)">
        <div class="card-body">
          <h5>Detalji narudžbe</h5>
          <hr>
          <div class="form-group mb-2">
            <label class="mx-1">Ime i prezime:</label>
            <input type="text" class="form-control shadow-sm" name="imePrezime" [(ngModel)]="korisnik.imePrezime" autocomplete="off" spellcheck="false" required>
          </div>
          <label class="mx-1">Grad:</label>
          <select class="form-select mb-2" name="grad" autocomplete="off" spellcheck="false" required>
            <option *ngFor="let i of gradovi" [(ngModel)]="i.gradId">{{ i.naziv }}</option>
          </select>
          <div class="form-group mb-2">
            <label class="mx-1">Adresa stanovanja:</label>
            <input type="text" class="form-control shadow-sm" name="adresa" [(ngModel)]="korisnik.adresa" autocomplete="off" spellcheck="false" required ngModel>
          </div>
          <div class="form-group mb-2">
            <label class="mx-1">Email adresa:</label>
            <input type="text" class="form-control shadow-sm" name="mailAdresa" [(ngModel)]="korisnik.mailAdresa" autocomplete="off" spellcheck="false" required ngModel>
          </div>
          <div class="form-group mb-2">
            <label class="mx-1">Telefonski broj:</label>
            <input type="text" class="form-control shadow-sm" name="telefonskiBroj" [(ngModel)]="korisnik.telefonskiBroj" autocomplete="off" spellcheck="false" required>
          </div>
          <hr>
          <div class="card-column">
            <p class="mb-2 mx-1">Ukupna cijena lijekova:</p>
            <p class="mb-2 mx-1">{{ sumPrice() }}KM</p>
          </div>
          <div class="card-column">
            <p class="mb-2 mx-1">Cijena dostave:</p>
            <p class="mb-2 mx-1">{{ deliveryPrice() }}KM</p>
          </div>
          <div class="card-column">
            <p class="mb-2 mx-1">Ukupno cijena lijekova i dostave:</p>
            <p class="mb-2 mx-1">{{ sumPrice() + deliveryPrice() }}KM</p>
          </div>
          <button type="button" class="btn btn-primary btn-lg btn-block mt-2" (click)="showModal = true">Potvrdi narudžbu</button>
          <app-modal
            *ngIf="showModal"
            (closeModal)="showModal = false"
            (onSubmit)="confirmOrder(loginForm.value)"
          ></app-modal>
        </div>
      </form>
    </div>
  </div>
</div>
